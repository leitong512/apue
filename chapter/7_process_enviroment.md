# 进程环境

## 进程相关

1.C程序总是从`main`函数开始执行的。`main`函数的原型是：
```
    int main(int argc, char * argv[])
```
- 参数:
    - `argc`: 命令行参数的数目
    - `argv`: 由指向各命令行参数的指针所组成的数组。`ISO
      C`和`POSIX.1`都要求`argv[argc]`是一个空指针。

当内核执行C程序时，在调用`main`之前先调用一个特殊的启动例程。
- 内核执行C程序是通过使用一个`exec`函数实现的
- 可执行程序文件将此启动例程指定为程序的起始地址（这是由链接器设置的，而链接器由C编译器调用）
- 启动例程从内核取得命令行参数和环境变量值，然后为调用`main`函数做好安排

2.有8种方式使进程终止（termination）,其中5种为正常终止，3种异常方式：
    - 正常终止方式：
        - 从`mian`返回
        - 调用`exit`函数
        - 调用`_exit`函数或`_Exit`函数
        - 多线程的程序中，最后一个线程从其启动例程返回
        - 多线程的程序中，从最后一个线程调用`pthread_exit`函数
    - 异常终止方式：
        - 调用`abort`函数
        - 接收到一个信号
        - 多线程的程序中，最后一个线程对取消请求作出响应

3.当内核执行 C
程序时，在调用`main`之前先调用一个启动例程。该启动例程是这样编写的：从`main`返
回后立即调用`exit`函数。其形式`exit(main(argc,argv))`。
    > 实际上启动例程通常是汇编语言写的
